<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Nuevo Album Rockola</title>
        <a id="banner_main"> 
            <header id="titulo_main">
                La Rockola
            </header>
        </a>
        <br><h1> <span id="titulo">Add a new Album!</span></h1>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"><link/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
        <link type="text/css" rel="stylesheet" href="styleNuevo.css" />
    </head>
    
    <body>
        <form action="post/new" method="post" class="needs-validation" novalidate>
            <br>
            <div class="container">
            <br>
            <div class="border p-3 rounded-3">
                <div class="row">  
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <form role="form">
                        <div class="input-group">
                            <div class="input-group mb-3 ">
                                <span class="input-group-text">Artist</span>
                                <input type="text" class="form-control" placeholder="Name" aria-label="Artist name" name='artist' id="ArtistInput"  pattern="^[A-Z][a-zA-Z\s]*$" required>
                                <div class="valid-feedback"></div>
                                <div class="valid-feedback">
                                    Ok!
                                </div>
                                <div class="invalid-feedback" id="ArtistIn">
                                    You need to write down the name of the artist.
                                </div>
                                <div class="invalid-feedback" >
                                    You need to write down the name of the artist with the first letter capitalized.
                                </div>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Year</span>
                                <input type="number" class="form-control" placeholder="YYYY" aria-label="Year" min="1700" max="2024" name='year' required>
                                <div class="valid-feedback">
                                    Ok!
                            </div>
                                <div class="invalid-feedback">
                                    You need to write down the year.
                                </div>
                            </div>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">Album</span>
                            <input type="text" class="form-control" placeholder="Name" aria-label="Nombre" aria-describedby="basic-addon1" name='album' required>
                            <div class="valid-feedback">
                                Ok!
                            </div>
                            <div class="invalid-feedback">
                                You need to write down the album's name.
                            </div>
                        </div>
                        
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">Cover</span>
                            <input type="text" class="form-control" placeholder="Album's cover URL"  id="CoverInput" aria-label="url" aria-describedby="basic-addon1" name='cover' pattern="https://.*" required>
                            <div class="valid-feedback">
                                Ok!
                            </div>
                            <div class="invalid-feedback" id="CoverIn">
                                You need to sumbit the link of the album's cover.
                            </div>
                            <div class="invalid-feedback">
                                Cover's URL must start with  "https://".
                            </div>
                        </div>
                        
                        
                        <div class="input-group mb-3">
                            <span class="input-group-text">Genre</span>
                            <input type="text" aria-label="First name" class="form-control" name='genre' required>
                            <div class="valid-feedback">
                                Ok!
                            </div>
                            <div class="invalid-feedback">
                                You need to write down the genre.
                            </div>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Score</span>
                            <select id="Score" class="form-control" name='score' required> 
                                <option selected="Add a Score"> </option>
                                <option value="0"> 0 </option>
                                <option value="1"> 1 </option>
                                <option value="2"> 2 </option>
                                <option value="3"> 3 </option>
                                <option value="4"> 4 </option>
                                <option value="5"> 5 </option>
                                <option value="6"> 6 </option>
                                <option value="7"> 7 </option>
                                <option value="8"> 8 </option>
                                <option value="9"> 9 </option>
                                <option value="10"> 10 </option>
                            </select>
                            <div class="valid-feedback">
                                Ok!
                            </div>
                            <div class="invalid-feedback">
                                You need to select a score.
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                            <span class="input-group-text" >Review</span>
                            </div>
                            <textarea class="form-control" rows="1" name='review' id="ReviewInput" minlength="50" maxlength="500" required></textarea>
                            <div class="valid-feedback">
                                Ok!
                            </div>
                            <div class="invalid-feedback"  id="ReviewIn">
                                You need to write down a review.
                            </div>
                            <div class="invalid-feedback">
                                The text must be between 50 and 500 characters.
                            </div>
                        </div>
                    </div>                   
                    <br><br>
                    </form>
                    <div class= "d-flex justify-content-center gap-2">
                    <button type="submit" class="btn btn-default" value='Save'>Save</button>

                    <a href= "/" class="btn btn-default">Cancel</a>
                </div>
            </div>
            </div>
            </div>
            </div>
        </form>
    </body> 
</html>
 <script>
 (function () {
    'use strict'
  
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')
  
    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
  
          form.classList.add('was-validated')
        }, false)
        var coverInput = form.querySelector('#CoverInput');

            coverInput.addEventListener('input', function () {
                var coverValue = coverInput.value.trim();

                var invalidCoverIn = form.querySelector('#CoverIn');
                var invalidFeedback = form.querySelector('.invalid-feedback:not(#CoverIn)');

                if (coverValue.length > 0) {
                invalidCoverIn.style.display = 'none';
                } else {
                invalidCoverIn.style.display = 'block';
                }
            });

            var artistInput = form.querySelector('#ArtistInput');

        artistInput.addEventListener('input', function () {
            var artistValue = artistInput.value.trim();

            var invalidArtistIn = form.querySelector('#ArtistIn');
            var invalidFeedback = form.querySelector('.invalid-feedback:not(#ArtistIn)');

            if (artistValue.length > 0) {
            invalidArtistIn.style.display = 'none';
            } else {
            invalidArtistIn.style.display = 'block';
            }
        });

        var ReviewInput = form.querySelector('#ReviewInput');

        ReviewInput.addEventListener('input', function () {
            var reviewValue = reviewInput.value.trim();
            var charCountInvalid = form.querySelector('#ReviewIn');
            var invalidFeedback = form.querySelector('.invalid-feedback:not(#ReviewIn)');


            if (reviewValue.length >= 50 && reviewValue.length <= 500) {
                charCountInvalid.style.display = 'none';
            } else {
                charCountInvalid.style.display = 'block';
            }
        });
    });
  })();
</script>